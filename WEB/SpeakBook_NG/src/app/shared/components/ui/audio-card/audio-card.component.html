<div class="audio-card" [class.active]="isActive" [class.playing]="isPlaying">
    <!-- 卡片編號 (可選) -->
    <div class="card-number" *ngIf="index !== undefined">{{ index + 1 }}</div>

    <!-- 卡片內容 -->
    <div class="card-content">
        <!-- 標籤名稱 -->
        <div class="card-header">
            <strong class="card-label">{{ data.label }}</strong>
        </div>

        <!-- 位置和大小信息 (可選) -->
        <div class="card-info" *ngIf="data.position && data.size">
            <span class="info-item">位置: ({{ data.position.x }}, {{ data.position.y }})</span>
            <span class="info-item">大小: {{ data.size.width }} × {{ data.size.height }}</span>
        </div>

        <!-- 音訊信息 -->
        <div class="audio-info" *ngIf="data.audioUrl">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>
            </svg>
            <span class="audio-name">{{ getAudioName(data.audioUrl) }}</span>
        </div>

        <!-- 播放進度條 -->
        <div class="audio-progress" *ngIf="isPlaying">
            <span class="time-current">{{ formatTime(audioCurrentTime) }}</span>
            <input type="range" class="progress-bar" [value]="audioCurrentTime" [max]="audioDuration"
                (input)="onProgressChange($event)" step="0.1">
            <span class="time-total">{{ formatTime(audioDuration) }}</span>
        </div>
    </div>

    <!-- 播放按鈕 -->
    <button class="play-button" *ngIf="data.audioUrl" [class.playing]="isPlaying" (click)="togglePlay()"
        [title]="isPlaying ? '停止播放' : '播放音訊'">
        <!-- 播放圖標 -->
        <svg *ngIf="!isPlaying" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
            fill="currentColor">
            <polygon points="5 3 19 12 5 21 5 3"></polygon>
        </svg>
        <!-- 暫停圖標 -->
        <svg *ngIf="isPlaying" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
            fill="currentColor">
            <rect x="6" y="4" width="4" height="16"></rect>
            <rect x="14" y="4" width="4" height="16"></rect>
        </svg>
    </button>
</div>
